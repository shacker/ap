{% extends 'base.html' %}
{% load thumbnail %}
{% load staticfiles %}

{% block page_title %}Participants{% endblock page_title %}

{% block content %}

    <header class="masthead faqs text-white text-center">
        <div class="overlay"></div>
        <div class="container">
            <div class="row">
                <div class="col-xl-9 mx-auto">
                    <h1 class="mb-5">How does this work?<br />
                        Click a role below to learn more.
                    </h1>
                </div>
            </div>
        </div>
    </header>


    <div class="container">
        <div class="row">
            <div class="col-lg-12">
                <h1 class="mt-4">
                    {{ profile.get_full_name }} ({{profile.username}})
                </h1>

                {% if profile.avatar %}
                    <p>
                        {% thumbnail profile.avatar.file "300x300" crop="center" as im %}
                            <img
                                src="{{ im.url }}"
                                width="{{ im.width }}" height="{{ im.height }}"
                                alt="{{profile.username}}'s profile image"
                            />
                        {% endthumbnail %}
                    </p>
                {% else %}
                    <img
                        src="{% static 'img/default_profile_200x200.png' %}"
                        width="200" height="200"
                        alt="Default profile image"
                    />
                {% endif %}

                {% if user == profile and not profile.profile_edited %}
                    <div class="messages alert alert-warning mt-4">
                        You have not yet set up your profile. Click EDIT to optionally update your
                        bio, profile image, social links and more (all optional).
                    </div>
                {% endif %}

                {% if profile.about %}
                    <div class="profile_label">
                        About {{ profile.username }}
                    </div>
                    <p>
                        {{ profile.about|safe }}
                    </p>
                {% endif %}

                {% if profile.personal_website %}
                    <div class="profile_label">
                        Personal Website
                    </div>
                    <p>
                        <a href="{{ profile.personal_website }}">{{ profile.personal_website }}</a>
                    </p>
                {% endif %}

                {% if profile.professional_website %}
                    <div class="profile_label">
                        Professional Website
                    </div>
                    <p>
                        <a href="{{ profile.professional_website }}">{{ profile.professional_website }}</a>
                    </p>
                {% endif %}

                {% if profile.facebook %}
                    <div class="profile_label">
                        Facebook
                    </div>
                    <p>
                        <a href="https://facebook.com/{{ profile.facebook }}">{{ profile.facebook }}</a>
                    </p>
                {% endif %}

                {% if profile.twitter %}
                    <div class="profile_label">
                        Twitter
                    </div>
                    <p>
                        <a href="https://twitter.com/{{ profile.twitter }}">{{ profile.twitter }}</a>
                    </p>
                {% endif %}

                {% if profile.linkedin %}
                    <div class="profile_label">
                        LinkedIn
                    </div>
                    <p>
                        <a href="https://www.linkedin.com/in/{{ profile.linkedin }}/">{{ profile.linkedin }}</a>
                    </p>
                {% endif %}

                {% if profile.ap_organizations.count > 0 %}
                    <div class="profile_label">
                        Organizations
                    </div>
                    <ul>
                        {% for org in profile.ap_organizations.all  %}
                            <li>
                                {{org}} (link when we have org deet page)
                            </li>
                        {% endfor %}
                    </ul>
                {% endif %}


                {% if profile.photo_set.all %}
                    <div class="profile_label">
                        Event photos
                    </div>
                    <ul>
                        {% for photo in profile.photo_set.all  %}
                            <li>
                                {{photo}}
                                {{ photo.file.url }}
                            </li>
                        {% endfor %}
                    </ul>
                {% endif %}


            </div>
        </div>
    </div>

{% endblock content %}


    about = models.TextField(
        help_text="Your bio / about you.",
        blank=True
    )

    avatar = models.ImageField(
        blank=True,
        null=True,
        upload_to=get_avatar_upload_dir,
        help_text="An image of you, to be used with your profile."
    )

    email = models.EmailField(
        max_length=254,
        blank=True
    )

    personal_website = models.URLField(
        max_length=200,
        blank=True,
        help_text="Your blog, profile, or hobby website or page URL."
    )

    professional_website = models.URLField(
        max_length=200,
        blank=True,
        help_text="Your work-related website or profile page URL."
    )

    facebook = models.CharField(
        blank=True,
        max_length=100,
        help_text="Your Facebook username (not URL)."
    )

    twitter = models.CharField(
        blank=True,
        max_length=100,
        help_text="Your Twitter username (not URL)."
    )

    linkedin = models.CharField(
        blank=True,
        max_length=100,
        verbose_name="LinkedIn",
        help_text="Your LinkedIn username (not URL)."
    )

    ap_organizations = models.ManyToManyField(
        Organization,
        blank=True,
        verbose_name="AP Orgs",
        help_text="Groups or organizations registered on athlete.photo, of which this user is a member.",
    )